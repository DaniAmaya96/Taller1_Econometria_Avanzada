list("raw" = "r.squared", "clean" = "R²", "fmt" = 3)
)
# --- GENERACIÓN DE LA TABLA DUAL (HTML + PDF) ---
modelsummary(
list(
"Puntaje SAT (Robusto)" = Reg_Hete_SAT,
"Puntaje SAT (Cluster)" = Reg_Clus_SAT,
"Ingreso Univ. (Robusto)" = Reg_Hete_Col,
"Ingreso Univ. (Cluster)" = Reg_Clus_Col
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente",
notes = list("Nota: Errores estándar entre paréntesis. Modelos 1 y 3 usan errores robustos HC1. Modelos 2 y 4 clusterizados a nivel colegio."),
output = "kableExtra" # Fundamental para poder editar después
) %>%
kable_styling(
# Opciones para HTML (Web)
bootstrap_options = c("striped", "hover", "condensed", "responsive"),
# Opciones para PDF (LaTeX)
latex_options = c("hold_position", "scale_down"),
# Opciones Generales
full_width = FALSE,
position = "center"
)
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresiones con errores heterocedasticos
Reg_Hete_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
Reg_Hete_Col<-feols(college ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
Reg_Clus_Col<-feols(college ~ D, race_teaching_1_, vcov = ~ school)
#Haciendo tabla autocontendia
#Definiendo nombres
mapa_coeficientes <- c(
"D" = "Profesor Misma Raza",
"(Intercept)" = "Constante"
)
#Dfiniendo estadisticos que queremos ver
mapa_gof <- list(
list("raw" = "nobs", "clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared", "clean" = "R²", "fmt" = 3)
)
#Generando tabla
modelsummary(
list(
"Puntaje SAT (Robusto)" = Reg_Hete_SAT,
"Puntaje SAT (Cluster)" = Reg_Clus_SAT,
"Ingreso Universidad (Robusto)" = Reg_Hete_Col,
"Ingreso a Uni (Cluster)" = Reg_Clus_Col
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente",
notes = list("Nota: Errores estándar entre paréntesis.
Los modelos 1 y 3 usan errores robustos HC1.
Los modelos 2 y 4 usan errores clusterizados
a nivel de colegio."),
output = "kableExtra") %>%
kable_styling(latex_options = c("hold_position", "scale_down"))
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresiones con errores heterocedasticos
Reg_Hete_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
Reg_Hete_Col<-feols(college ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
Reg_Clus_Col<-feols(college ~ D, race_teaching_1_, vcov = ~ school)
#Haciendo tabla autocontendia
#Definiendo nombres
mapa_coeficientes <- c(
"D" = "Profesor Misma Raza",
"(Intercept)" = "Constante"
)
#Dfiniendo estadisticos que queremos ver
mapa_gof <- list(
list("raw" = "nobs", "clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared", "clean" = "R²", "fmt" = 3)
)
#Generando tabla
modelsummary(
list(
"Puntaje SAT (Robusto)" = Reg_Hete_SAT,
"Puntaje SAT (Cluster)" = Reg_Clus_SAT,
"Ingreso Universidad (Robusto)" = Reg_Hete_Col,
"Ingreso Universidad (Cluster)" = Reg_Clus_Col
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente",
notes = list("Nota: Errores estándar entre paréntesis.
Los modelos 1 y 3 usan errores robustos HC1.
Los modelos 2 y 4 usan errores clusterizados
a nivel de colegio."),
output = "kableExtra"
) %>%
kable_styling(
# --- 1. ARGUMENTOS UNIVERSALES (Afectan a ambos) ---
full_width = FALSE,      # Mantiene la tabla compacta en ambos
position = "center",     # Centrada en ambos
font_size = 11,          # Tamaño de letra unificado
# --- 2. CONFIGURACIÓN DUAL (Se activan según el formato) ---
# Para que se vea bonito en PDF (LaTeX)
latex_options = c("hold_position", "scale_down", "striped"),
# Para que se vea bonito en Web (HTML)
bootstrap_options = c("striped", "hover", "condensed", "responsive")
)
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresiones con errores heterocedasticos
Reg_Hete_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
Reg_Hete_Col<-feols(college ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
Reg_Clus_Col<-feols(college ~ D, race_teaching_1_, vcov = ~ school)
#Haciendo tabla autocontendia
#Definiendo nombres
mapa_coeficientes <- c(
"D" = "Profesor Misma Raza",
"(Intercept)" = "Constante"
)
#Dfiniendo estadisticos que queremos ver
mapa_gof <- list(
list("raw" = "nobs", "clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared", "clean" = "R²", "fmt" = 3)
)
#Generando tabla
modelsummary(
list(
"Puntaje SAT (Robusto)" = Reg_Hete_SAT,
"Puntaje SAT (Cluster)" = Reg_Clus_SAT,
"Ingreso Universidad (Robusto)" = Reg_Hete_Col,
"Ingreso Universidad (Cluster)" = Reg_Clus_Col
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente",
notes = list("Nota: Errores estándar entre paréntesis.
Los modelos 1 y 3 usan errores robustos HC1.
Los modelos 2 y 4 usan errores clusterizados
a nivel de colegio."),
output = "kableExtra") %>%
kable_styling(latex_options = c("hold_position", "scale_down"))
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresiones con errores heterocedasticos
Reg_Hete_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
Reg_Hete_Col<-feols(college ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
Reg_Clus_Col<-feols(college ~ D, race_teaching_1_, vcov = ~ school)
#Haciendo tabla autocontendia
# 1. Definimos el mapa de coeficientes y gof igual que antes
mapa_coeficientes <- c("D" = "Profesor Misma Raza", "(Intercept)" = "Constante")
mapa_gof <- list(list("raw" = "nobs", "clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared", "clean" = "R²", "fmt" = 3))
# 2. GENERACIÓN DE LA TABLA (Aquí está el cambio clave)
modelsummary(
list(
# Fíjate que aquí usamos nombres CORTOS y sin espacios complejos
"(Robusto)" = Reg_Hete_SAT,
"(Cluster)" = Reg_Clus_SAT,
"(Robusto)" = Reg_Hete_Col,
"(Cluster)" = Reg_Clus_Col
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente",
notes = list("Nota: Errores estándar entre paréntesis. Modelos 1 y 3 robustos HC1. Modelos 2 y 4 clusterizados."),
output = "kableExtra" # Importante: Output a kableExtra
) %>%
# 3. AGREGAMOS EL ENCABEZADO SUPERIOR
# " " = 1 (La columna de variables)
# "Puntaje SAT" = 2 (Abarca las primeras dos columnas de modelos)
# "Ingreso Universidad" = 2 (Abarca las siguientes dos)
add_header_above(c(" " = 1, "Puntaje SAT" = 2, "Ingreso Universidad" = 2)) %>%
# 4. ESTILOS UNIVERSALES (HTML + PDF)
kable_styling(
latex_options = c("hold_position", "scale_down", "striped"),
bootstrap_options = c("striped", "hover", "condensed"),
full_width = FALSE,
position = "center"
)
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresiones con errores heterocedasticos
Reg_Hete_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
Reg_Hete_Col<-feols(college ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
Reg_Clus_Col<-feols(college ~ D, race_teaching_1_, vcov = ~ school)
#Haciendo tabla autocontendia
#Definimos el mapa de coeficientes y la información visible
mapa_coeficientes <- c("D" = "Profesor Misma Raza", "(Intercept)" = "Constante")
mapa_gof <- list(list("raw" = "nobs", "clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared", "clean" = "R²", "fmt" = 3))
#Generamos la tabla
modelsummary(
list(
"(Robusto)" = Reg_Hete_SAT,
"(Cluster)" = Reg_Clus_SAT,
"(Robusto)" = Reg_Hete_Col,
"(Cluster)" = Reg_Clus_Col
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente",
notes = list("Nota: Errores estándar entre paréntesis."),
output = "kableExtra"
) %>%
add_header_above(c(" " = 1, "Puntaje SAT" = 2,
"Ingreso Universidad" = 2)) %>%
kable_styling(
latex_options = c("hold_position",
"scale_down", "striped"),
bootstrap_options = c("striped", "hover", "condensed"),
full_width = FALSE,
position = "center"
)
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresiones con errores heterocedasticos
Reg_Hete_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
Reg_Hete_Col<-feols(college ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_SAT<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
Reg_Clus_Col<-feols(college ~ D, race_teaching_1_, vcov = ~ school)
#Haciendo tabla autocontendia
#Definimos el mapa de coeficientes y la información visible
mapa_coeficientes <- c("D" = "Profesor Misma Raza",
"(Intercept)" = "Media sin Tratamiento")
mapa_gof <- list(list("raw" = "nobs",
"clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared",
"clean" = "R²", "fmt" = 3))
#Generamos la tabla
modelsummary(
list(
"(Robusto)" = Reg_Hete_SAT,
"(Cluster)" = Reg_Clus_SAT,
"(Robusto)" = Reg_Hete_Col,
"(Cluster)" = Reg_Clus_Col
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente",
notes = list("Nota: Errores estándar entre paréntesis."),
output = "kableExtra"
) %>%
add_header_above(c(" " = 1, "Puntaje SAT" = 2,
"Ingreso Universidad" = 2)) %>%
kable_styling(
latex_options = c("hold_position",
"scale_down", "striped"),
bootstrap_options = c("striped", "hover", "condensed"),
full_width = FALSE,
position = "center"
)
sum(race_teaching_1_$county)
table(race_teaching_1_$county)
table(race_teaching_1_$state)
#Haciendo las regresion con errores heterocedasticos
Reg_Hete<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_School<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
#Haciendo las regresiones con cluster por condado
Reg_Clus_County<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ county )
#Haciendo las regresiones con cluster por estado
Reg_Clus_State<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ state )
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresion con errores heterocedasticos
Reg_Hete<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_School<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
#Haciendo las regresiones con cluster por condado
Reg_Clus_County<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ county )
#Haciendo las regresiones con cluster por estado
Reg_Clus_State<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ state )
#Haciendo tabla autocontendia
#Definimos el mapa de coeficientes y la información visible
mapa_coeficientes <- c("D" = "Profesor Misma Raza",
"(Intercept)" = "Media sin Tratamiento")
mapa_gof <- list(list("raw" = "nobs",
"clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared",
"clean" = "R²", "fmt" = 3))
#Generamos la tabla
modelsummary(
list(
"(Robusto)" = Reg_Hete,
"(Cluster Coelgio)" = Reg_Clus_School,
"(Cluster Condado)" = Reg_Clus_County ,
"(Cluster Estado)" = Reg_Clus_State
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente en diferentes niveles cluster",
notes = list("Nota: Errores estándar entre paréntesis."),
output = "kableExtra"
) %>%
add_header_above(c(" " = 1, "Puntaje SAT" = 4)) %>%
kable_styling(
latex_options = c("hold_position",
"scale_down", "striped"),
bootstrap_options = c("striped", "hover", "condensed"),
full_width = FALSE,
position = "center"
)
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresion con errores heterocedasticos
Reg_Hete<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_School<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
#Haciendo las regresiones con cluster por condado
Reg_Clus_County<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ county )
#Haciendo las regresiones con cluster por estado
Reg_Clus_State<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ state )
#Haciendo tabla autocontendia
#Definimos el mapa de coeficientes y la información visible
mapa_coeficientes <- c("D" = "Profesor Misma Raza",
"(Intercept)" = "Media sin Tratamiento")
mapa_gof <- list(list("raw" = "nobs",
"clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared",
"clean" = "R²", "fmt" = 3))
#Generamos la tabla
modelsummary(
list(
"Robustos" = Reg_Hete,
"Cluster Coelgio" = Reg_Clus_School,
"Cluster Condado" = Reg_Clus_County ,
"Cluster Estado" = Reg_Clus_State
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente en diferentes niveles cluster",
notes = list("Nota: Errores estándar entre paréntesis."),
output = "kableExtra"
) %>%
add_header_above(c(" " = 1, "Puntaje SAT" = 4)) %>%
kable_styling(
latex_options = c("hold_position",
"scale_down", "striped"),
bootstrap_options = c("striped", "hover", "condensed"),
full_width = FALSE,
position = "center"
)
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresion con errores heterocedasticos
Reg_Hete<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_School<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
#Haciendo las regresiones con cluster por condado
Reg_Clus_County<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ county )
#Haciendo las regresiones con cluster por estado
Reg_Clus_State<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ state )
#Haciendo tabla autocontendia
#Definimos el mapa de coeficientes y la información visible
mapa_coeficientes <- c("D" = "Profesor Misma Raza",
"(Intercept)" = "Media sin Tratamiento")
mapa_gof <- list(list("raw" = "nobs",
"clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared",
"clean" = "R²", "fmt" = 3))
#Generamos la tabla
modelsummary(
list(
"Robustos" = Reg_Hete,
"Cluster Coelgio" = Reg_Clus_School,
"Cluster Condado" = Reg_Clus_County ,
"Cluster Estado" = Reg_Clus_State
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente en diferentes niveles cluster",
notes = list("Nota: Errores estándar entre paréntesis."),
output = "kableExtra"
) %>%
add_header_above(c(" " = 1, "Puntaje SAT" = 4)) %>%
kable_styling(
latex_options = c("hold_position",
"scale_down", "striped"),
bootstrap_options = c("striped", "hover", "condensed"),
full_width = FALSE,
position = "center"
)
#Cargando paquetes necesarios
library(haven)
library(fixest)
library(modelsummary)
library(dplyr)
library(kableExtra)
#Importando los datos para la estimación del modelo
race_teaching_1_ <- read_dta("race_teaching (1).dta")
#Haciendo las regresion con errores heterocedasticos
Reg_Hete<-feols(sat_math ~ D, race_teaching_1_, vcov = "hetero")
#Haciendo las regresiones con cluster por colegio
Reg_Clus_School<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ school )
#Haciendo las regresiones con cluster por condado
Reg_Clus_County<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ county )
#Haciendo las regresiones con cluster por estado
Reg_Clus_State<-feols(sat_math ~ D, race_teaching_1_, vcov = ~ state )
#Haciendo tabla autocontendia
#Definimos el mapa de coeficientes y la información visible
mapa_coeficientes <- c("D" = "Profesor Misma Raza",
"(Intercept)" = "Media sin Tratamiento")
mapa_gof <- list(list("raw" = "nobs",
"clean" = "Observaciones", "fmt" = 0),
list("raw" = "r.squared",
"clean" = "R²", "fmt" = 3))
#Generamos la tabla
modelsummary(
list(
"Robustos" = Reg_Hete,
"Cluster Coelgio" = Reg_Clus_School,
"Cluster Condado" = Reg_Clus_County ,
"Cluster Estado" = Reg_Clus_State
),
coef_map = mapa_coeficientes,
gof_map = mapa_gof,
fmt = 3,
stars = c('*' = .1, '**' = .05, '***' = .01),
title = "Tabla 1. Efecto de la asignación racial docente en diferentes niveles cluster",
notes = list("Nota: Errores estándar entre paréntesis."),
output = "kableExtra"
) %>%
add_header_above(c(" " = 1, "Puntaje SAT" = 4)) %>%
kable_styling(
latex_options = c("hold_position",
"scale_down", "striped"),
bootstrap_options = c("striped", "hover", "condensed"),
full_width = FALSE,
position = "center"
)
